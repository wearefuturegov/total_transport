- content_for :top_sec do
  = form_for [@route, @booking], url: route_booking_path(@route, @booking), method: :put do |form|

    %section.section
      
      %h2
        = t('summary.title')

    %section.section
      %section.key
        %section.markers
          %section
            = fa_icon 'circle-o'
          %section.link
          %section
            = fa_icon 'map-marker'
        %section.info-wrap
          %span.top
            %label
              = @booking.pickup_stop.name
          %span.bottom
            %label
              = @booking.dropoff_stop.name

    %section.section

      %p
        = pluralize @booking.number_of_passengers, 'passenger'
      - if @booking.number_of_adults > 0
        %p
          = t('bookings.passenger.adult.title')
          #{@booking.number_of_adults}
          - if @booking.return_journey?
            (#{number_to_currency(@booking.adult_return_price, :unit => "£")} return)
          - else
            (#{number_to_currency(@booking.adult_single_price, :unit => "£")} single)
      - if @booking.child_tickets > 0
        %p
          = t('bookings.passenger.child.title')
          #{@booking.child_tickets}
          - if @booking.return_journey?
            (#{number_to_currency(@booking.child_return_price, :unit => "£")} return)
          - else
            (#{number_to_currency(@booking.child_single_price, :unit => "£")} single)
      - if @booking.older_bus_passes > 0
        %p
          Older persons bus pass: #{@booking.older_bus_passes} (£0.00 each)
      - if @booking.disabled_bus_passes > 0
        %p
          Disabled persons bus pass: #{@booking.disabled_bus_passes} (£0.00 each)
      - if @booking.scholar_bus_passes > 0
        %p
          Scholarly Season Ticket: #{@booking.scholar_bus_passes} (£0.00 each)
      %p
        Total to pay
        \: #{number_to_currency @booking.price, unit: '£'}

    %section.section
        
      %h2
        = t('summary.outbound.title')

      %h4
        = t('summary.outbound.pickup')

      %p
        #{@booking.pickup_name}

      %h4
        = t('summary.outbound.date')
      
      %p
        #{friendly_date @booking.journey.start_time}

      %h4
        = t('summary.outbound.time')

      %p
        = @booking.pickup_time.strftime("%l:%M%P")
        = t('summary.plus_minus_ten')

      -#    
        %p
          Picked up approx #{plus_minus_ten @booking.pickup_time}

        %p
          = map(@booking.pickup_landmark.latitude, @booking.pickup_landmark.longitude)
      
    %section.section
        
      %h4
        = t('summary.outbound.dropoff')

      %p
        #{@booking.dropoff_name}

      %h4
        = t('summary.outbound.eta')

      %p
        = @booking.dropoff_time.strftime("%l:%M%P")

      -#
        = friendly_date @booking.journey.start_time, true
        
        %p
          = map(@booking.dropoff_landmark.latitude, @booking.dropoff_landmark.longitude)
        
      - if @booking.return_journey?
      
        %h2
          = t('summary.return.title')
        
        %h4
          = t('summary.return.pickup')

        %p
          #{@booking.dropoff_name}

        %h4
          = t('summary.return.time')

        %p
          = @booking.pickup_time(true).strftime("%l:%M%P")
          = t('summary.plus_minus_ten')

        %h4
          = t('summary.return.dropoff')

        %p
          #{@booking.pickup_name}

        -#
          = friendly_date @booking.return_journey.start_time, true
          
        -#
          %p
            = map(@booking.dropoff_landmark.latitude, @booking.dropoff_landmark.longitude)
          
        -#
          = friendly_date @booking.journey.start_time, true
          at
          = @booking.dropoff_time(true).strftime("%l:%M%P")

          %p
            = map(@booking.pickup_landmark.latitude, @booking.pickup_landmark.longitude)
    %section.section
      = link_to @back_path do
        = t('summary.back')

    = form.submit :class => 'button cta primary', :id => 'submit-booking', :name => :confirm
